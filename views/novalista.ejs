<%- include ('./partials/header.ejs') %>
<body>
    <%- include ('./partials/navbar.ejs') %>
    <div class="container">
        <br>
        <br>
        <hr>
        <div class="card" id="formulario-lista">
            <div class="card-header">
                <h3>Criar nova lista</h3>
            </div>
            <div class="card-body">
        
                <form method="POST" action="/salvarlista" enctype="multipart/form-data">
                    <label>Título</label>
                        <input type="text" placeholder="Título" class="form-control" name="titulo">
                        <br><label>Descrição</label>
                        <textarea placeholder="Coloque a descrição aqui" class="form-control" name="descricao"></textarea>
                        <br>
                        <div class="row">
                            <input class="col-6" type="file" name="file" id="upar">
                            <p class="col-5"></p>  
                            

                            <script>
                                function fileValidation() {
                                    var fileInput = 
                                        document.getElementById('upar');
                                      
                                    var filePath = fileInput.value;
                                  
                                    // Allowing file type
                                    var allowedExtensions = 
                                            /(\.txt)$/i;
                                      
                                    if (!allowedExtensions.exec(filePath)) {
                                        alert('O arquivo não é um txt');
                                        fileInput.value = '';
                                        return false;
                                    } 
                                    else 
                                    {
                                      
                                        // Image preview
                                        if (fileInput.files && fileInput.files[0]) {
                                            var reader = new FileReader();
                                            reader.onload = function(e) {
                                                document.getElementById(
                                                    'imagePreview').innerHTML = 
                                                    '<img src="' + e.target.result
                                                    + '"/>';
                                            };
                                              
                                            reader.readAsDataURL(fileInput.files[0]);
                                        }
                                    }
                                }
                            </script>
                            <button class="btn btn-primary col-1" type="submit" value="upload" onclick="return fileValidation()">Salvar</button>
                        </div>  
                </form> 

            </div>
            
        </div>
    </div>
</body>
<%- include ('./partials/footer.ejs') %>
